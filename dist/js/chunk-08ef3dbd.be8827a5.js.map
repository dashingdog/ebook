{"version":3,"sources":["webpack:///./node_modules/core-js/modules/es6.regexp.split.js","webpack:///src/components/ebook/EbookReader.vue","webpack:///./src/components/ebook/EbookReader.vue?6359","webpack:///./src/components/ebook/EbookReader.vue?c4c8","webpack:///./src/components/ebook/EbookReader.vue","webpack:///./node_modules/core-js/modules/es6.string.iterator.js","webpack:///./node_modules/core-js/modules/es6.function.name.js","webpack:///./src/components/ebook/EbookReader.vue?6365","webpack:///./node_modules/core-js/modules/_is-regexp.js"],"names":["isRegExp","__webpack_require__","anObject","speciesConstructor","advanceStringIndex","toLength","callRegExpExec","regexpExec","fails","$min","Math","min","$push","push","$SPLIT","LENGTH","LAST_INDEX","MAX_UINT32","SUPPORTS_Y","RegExp","defined","SPLIT","$split","maybeCallNative","internalSplit","separator","limit","string","String","this","undefined","call","match","lastIndex","lastLength","output","flags","ignoreCase","multiline","unicode","sticky","lastLastIndex","splitLimit","separatorCopy","source","slice","index","apply","test","O","splitter","regexp","res","done","value","rx","S","C","unicodeMatching","lim","length","p","q","A","e","z","i","global","ePub","epubjs__WEBPACK_IMPORTED_MODULE_5__","__webpack_exports__","mixins","_utils_mixin__WEBPACK_IMPORTED_MODULE_4__","methods","onMouseEnter","mouseState","mouseStartTime","timeStamp","preventDefault","stopPropagation","onMouseMove","offsetY","firstOffsetY","clientY","setOffsetY","onMouseEnd","time","move","changedTouches","moveEnd","onMaskClick","offsetX","width","window","innerWidth","prevPage","nextPage","toggleTitleAndMenu","_this","rendition","prev","then","refreshLocation","hideTitleAndMenu","_this2","next","menuVisible","setSettingVisible","setFontFamilyVisible","setMenuVisible","initFontSize","fontSize","Object","_utils_localStorage__WEBPACK_IMPORTED_MODULE_7__","fileName","themes","setDefaultFontSize","defaultFontSize","initFontFamily","font","setDefaultFontFamily","defaultFontFamily","initTheme","_this3","defaultTheme","themeList","name","setDefaultTheme","forEach","theme","register","style","select","initRendition","_this4","book","renderTo","height","innerHeight","location","display","initGlobalStyle","hooks","content","contents","Promise","all","addStylesheet","concat","initGesture","_this5","on","event","touchStartX","clientX","touchStartTime","parseBook","_this6","loaded","cover","archive","createUrl","url","setCover","metadata","setMetadata","navigation","nav","navItem","_utils_book__WEBPACK_IMPORTED_MODULE_6__","toc","find","item","level","arguments","parent","filter","parentItem","id","setNavigation","initEpub","_this7","setCurrentBook","ready","locations","generate","setBookAvailable","mounted","_this8","books","$route","params","split","_utils_localForage__WEBPACK_IMPORTED_MODULE_8__","err","blob","setFileName","join","data","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","click","touchmove","touchend","mousedown","$event","type","indexOf","_k","keyCode","key","button","mousemove","mouseup","staticRenderFns","ebook_EbookReadervue_type_script_lang_js_","EbookReadervue_type_script_lang_js_","component","componentNormalizer","$at","iterated","_t","_i","point","dP","f","FProto","Function","prototype","nameRE","NAME","configurable","get","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_EbookReader_vue_vue_type_style_index_0_id_34236c03_lang_scss_scoped_true___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_EbookReader_vue_vue_type_style_index_0_id_34236c03_lang_scss_scoped_true___WEBPACK_IMPORTED_MODULE_0___default","n","isObject","cof","MATCH","module","exports","it"],"mappings":"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","file":"js/chunk-08ef3dbd.be8827a5.js","sourcesContent":["'use strict';\n\nvar isRegExp = require('./_is-regexp');\nvar anObject = require('./_an-object');\nvar speciesConstructor = require('./_species-constructor');\nvar advanceStringIndex = require('./_advance-string-index');\nvar toLength = require('./_to-length');\nvar callRegExpExec = require('./_regexp-exec-abstract');\nvar regexpExec = require('./_regexp-exec');\nvar fails = require('./_fails');\nvar $min = Math.min;\nvar $push = [].push;\nvar $SPLIT = 'split';\nvar LENGTH = 'length';\nvar LAST_INDEX = 'lastIndex';\nvar MAX_UINT32 = 0xffffffff;\n\n// babel-minify transpiles RegExp('x', 'y') -> /x/y and it causes SyntaxError\nvar SUPPORTS_Y = !fails(function () { RegExp(MAX_UINT32, 'y'); });\n\n// @@split logic\nrequire('./_fix-re-wks')('split', 2, function (defined, SPLIT, $split, maybeCallNative) {\n  var internalSplit;\n  if (\n    'abbc'[$SPLIT](/(b)*/)[1] == 'c' ||\n    'test'[$SPLIT](/(?:)/, -1)[LENGTH] != 4 ||\n    'ab'[$SPLIT](/(?:ab)*/)[LENGTH] != 2 ||\n    '.'[$SPLIT](/(.?)(.?)/)[LENGTH] != 4 ||\n    '.'[$SPLIT](/()()/)[LENGTH] > 1 ||\n    ''[$SPLIT](/.?/)[LENGTH]\n  ) {\n    // based on es5-shim implementation, need to rework it\n    internalSplit = function (separator, limit) {\n      var string = String(this);\n      if (separator === undefined && limit === 0) return [];\n      // If `separator` is not a regex, use native split\n      if (!isRegExp(separator)) return $split.call(string, separator, limit);\n      var output = [];\n      var flags = (separator.ignoreCase ? 'i' : '') +\n                  (separator.multiline ? 'm' : '') +\n                  (separator.unicode ? 'u' : '') +\n                  (separator.sticky ? 'y' : '');\n      var lastLastIndex = 0;\n      var splitLimit = limit === undefined ? MAX_UINT32 : limit >>> 0;\n      // Make `global` and avoid `lastIndex` issues by working with a copy\n      var separatorCopy = new RegExp(separator.source, flags + 'g');\n      var match, lastIndex, lastLength;\n      while (match = regexpExec.call(separatorCopy, string)) {\n        lastIndex = separatorCopy[LAST_INDEX];\n        if (lastIndex > lastLastIndex) {\n          output.push(string.slice(lastLastIndex, match.index));\n          if (match[LENGTH] > 1 && match.index < string[LENGTH]) $push.apply(output, match.slice(1));\n          lastLength = match[0][LENGTH];\n          lastLastIndex = lastIndex;\n          if (output[LENGTH] >= splitLimit) break;\n        }\n        if (separatorCopy[LAST_INDEX] === match.index) separatorCopy[LAST_INDEX]++; // Avoid an infinite loop\n      }\n      if (lastLastIndex === string[LENGTH]) {\n        if (lastLength || !separatorCopy.test('')) output.push('');\n      } else output.push(string.slice(lastLastIndex));\n      return output[LENGTH] > splitLimit ? output.slice(0, splitLimit) : output;\n    };\n  // Chakra, V8\n  } else if ('0'[$SPLIT](undefined, 0)[LENGTH]) {\n    internalSplit = function (separator, limit) {\n      return separator === undefined && limit === 0 ? [] : $split.call(this, separator, limit);\n    };\n  } else {\n    internalSplit = $split;\n  }\n\n  return [\n    // `String.prototype.split` method\n    // https://tc39.github.io/ecma262/#sec-string.prototype.split\n    function split(separator, limit) {\n      var O = defined(this);\n      var splitter = separator == undefined ? undefined : separator[SPLIT];\n      return splitter !== undefined\n        ? splitter.call(separator, O, limit)\n        : internalSplit.call(String(O), separator, limit);\n    },\n    // `RegExp.prototype[@@split]` method\n    // https://tc39.github.io/ecma262/#sec-regexp.prototype-@@split\n    //\n    // NOTE: This cannot be properly polyfilled in engines that don't support\n    // the 'y' flag.\n    function (regexp, limit) {\n      var res = maybeCallNative(internalSplit, regexp, this, limit, internalSplit !== $split);\n      if (res.done) return res.value;\n\n      var rx = anObject(regexp);\n      var S = String(this);\n      var C = speciesConstructor(rx, RegExp);\n\n      var unicodeMatching = rx.unicode;\n      var flags = (rx.ignoreCase ? 'i' : '') +\n                  (rx.multiline ? 'm' : '') +\n                  (rx.unicode ? 'u' : '') +\n                  (SUPPORTS_Y ? 'y' : 'g');\n\n      // ^(? + rx + ) is needed, in combination with some S slicing, to\n      // simulate the 'y' flag.\n      var splitter = new C(SUPPORTS_Y ? rx : '^(?:' + rx.source + ')', flags);\n      var lim = limit === undefined ? MAX_UINT32 : limit >>> 0;\n      if (lim === 0) return [];\n      if (S.length === 0) return callRegExpExec(splitter, S) === null ? [S] : [];\n      var p = 0;\n      var q = 0;\n      var A = [];\n      while (q < S.length) {\n        splitter.lastIndex = SUPPORTS_Y ? q : 0;\n        var z = callRegExpExec(splitter, SUPPORTS_Y ? S : S.slice(q));\n        var e;\n        if (\n          z === null ||\n          (e = $min(toLength(splitter.lastIndex + (SUPPORTS_Y ? 0 : q)), S.length)) === p\n        ) {\n          q = advanceStringIndex(S, q, unicodeMatching);\n        } else {\n          A.push(S.slice(p, q));\n          if (A.length === lim) return A;\n          for (var i = 1; i <= z.length - 1; i++) {\n            A.push(z[i]);\n            if (A.length === lim) return A;\n          }\n          q = p = e;\n        }\n      }\n      A.push(S.slice(p));\n      return A;\n    }\n  ];\n});\n","<template>\n   <div class=\"ebook-reader\">\n       <div id=\"read\"></div>\n       <div class=\"ebook-reader-mask\"\n       @click=\"onMaskClick\"\n       @touchmove=\"move\"\n       @touchend=\"moveEnd\"\n       @mousedown.left=\"onMouseEnter\"\n       @mousemove.left=\"onMouseMove\"\n       @mouseup.left=\"onMouseEnd\"\n       ></div>\n   </div>\n</template>\n\n<script>\nimport { ebookMixin } from '../../utils/mixin'\nimport Epub from 'epubjs'\nimport { flatten } from '../../utils/book'\nimport {\n  getFontFamily,\n  saveFontFamily,\n  getFontSize,\n  saveFontSize,\n  getTheme,\n  saveTheme,\n  getLocation } from '../../utils/localStorage'\nimport { getLocalForage } from '../../utils/localForage'\nglobal.ePub = Epub\nexport default {\n  mixins: [ebookMixin],\n  methods: {\n    onMouseEnter (e) {\n      this.mouseState = 1\n      this.mouseStartTime = e.timeStamp\n      e.preventDefault()\n      e.stopPropagation()\n    },\n    onMouseMove (e) {\n      if (this.mouseState === 1) {\n        this.mouseState = 2\n      } else if (this.mouseState === 2) {\n        let offsetY = 0\n        if (this.firstOffsetY) {\n          offsetY = e.clientY - this.firstOffsetY\n          this.setOffsetY(offsetY)\n        } else {\n          this.firstOffsetY = e.clientY\n        }\n      }\n      e.preventDefault()\n      e.stopPropagation()\n    },\n    onMouseEnd (e) {\n      if (this.mouseState === 2) {\n        this.setOffsetY(0)\n        this.firstOffsetY = null\n        this.mouseState = 3\n      } else {\n        this.mouseState = 4\n      }\n      const time = e.timeStamp - this.mouseStartTime\n      if (time < 200) {\n        this.mouseState = 4\n      }\n      e.preventDefault()\n      e.stopPropagation()\n    },\n    move (e) {\n      let offsetY = 0\n      if (this.firstOffsetY) {\n        offsetY = e.changedTouches[0].clientY - this.firstOffsetY\n        this.setOffsetY(offsetY)\n      } else {\n        this.firstOffsetY = e.changedTouches[0].clientY\n      }\n      e.preventDefault()\n      e.stopPropagation()\n    },\n    moveEnd (e) {\n      this.setOffsetY(0)\n      this.firstOffsetY = null\n    },\n    onMaskClick (e) {\n      if (this.mouseState && (this.mouseState === 2 || this.mouseState === 3)) {\n        return\n      }\n      const offsetX = e.offsetX\n      const width = window.innerWidth\n      if (offsetX > 0 && offsetX < width * 0.3) {\n        this.prevPage()\n      } else if (offsetX > 0 && offsetX > width * 0.7) {\n        this.nextPage()\n      } else {\n        this.toggleTitleAndMenu()\n      }\n    },\n    prevPage () {\n      if (this.rendition) {\n        this.rendition.prev().then(() => {\n          this.refreshLocation()\n        })\n        this.hideTitleAndMenu()\n      }\n    },\n\n    nextPage () {\n      if (this.rendition) {\n        this.rendition.next().then(() => {\n          this.refreshLocation()\n        })\n        this.hideTitleAndMenu()\n      }\n    },\n    toggleTitleAndMenu () {\n      if (this.menuVisible) {\n        this.setSettingVisible(-1)\n        this.setFontFamilyVisible(false)\n      }\n      this.setMenuVisible(!this.menuVisible)\n    },\n    initFontSize () {\n      let fontSize = getFontSize(this.fileName)\n      if (!fontSize) {\n        saveFontSize(this.fileName, this.defaultFontSize)\n      } else {\n        this.rendition.themes.fontSize(fontSize + 'px')\n        this.setDefaultFontSize(fontSize)\n      }\n    },\n    initFontFamily () {\n      let font = getFontFamily(this.fileName)\n      if (!font) {\n        saveFontFamily(this.fileName, this.defaultFontFamily)\n      } else {\n        this.rendition.themes.font(font)\n        this.setDefaultFontFamily(font)\n      }\n    },\n    initTheme () {\n      let defaultTheme = getTheme(this.fileName)\n      if (!defaultTheme) {\n        defaultTheme = this.themeList[0].name\n        saveTheme(this.fileName, defaultTheme)\n      }\n      this.setDefaultTheme(defaultTheme)\n      this.themeList.forEach(theme => {\n        this.rendition.themes.register(theme.name, theme.style)\n      })\n      this.rendition.themes.select(defaultTheme)\n    },\n    initRendition () {\n      this.rendition = this.book.renderTo('read', {\n        width: innerWidth,\n        height: innerHeight,\n        methods: 'default'\n      })\n      const location = getLocation(this.fileName)\n      this.display(location, () => {\n        this.initTheme()\n        this.initFontSize()\n        this.initFontFamily()\n        this.initGlobalStyle()\n      })\n      this.rendition.hooks.content.register(contents => {\n        Promise.all([\n          contents.addStylesheet(`${process.env.VUE_APP_RES_URL}/fonts/daysOne.css`),\n          contents.addStylesheet(`${process.env.VUE_APP_RES_URL}/fonts/cabin.css`),\n          contents.addStylesheet(`${process.env.VUE_APP_RES_URL}/fonts/montserrat.css`),\n          contents.addStylesheet(`${process.env.VUE_APP_RES_URL}/fonts/tangerine.css`)\n        ]).then(() => {\n        })\n      })\n    },\n    initGesture () {\n      this.rendition.on('touchstart', event => {\n        this.touchStartX = event.changedTouches[0].clientX\n        this.touchStartTime = event.timeStamp\n      })\n      this.rendition.on('touchend', event => {\n        const offsetX = event.changedTouches[0].clientX - this.touchStartX\n        const time = event.timeStamp - this.touchStartTime\n        if (time < 500 && offsetX > 40) {\n          this.prevPage()\n        } else if (time < 500 && offsetX < -40) {\n          this.nextPage()\n        } else {\n          this.toggleTitleAndMenu()\n        }\n        event.preventDefault()\n        event.stopPropagation()\n      })\n      this.rendition.on('touchmove', event => {\n      })\n    },\n    parseBook () {\n      this.book.loaded.cover.then(cover => {\n        this.book.archive.createUrl(cover).then(url => {\n          this.setCover(url)\n        })\n        this.book.loaded.metadata.then(metadata => {\n          this.setMetadata(metadata)\n        })\n        this.book.loaded.navigation.then(nav => {\n          const navItem = flatten(nav.toc)\n\n          function find (item, level = 0) {\n            return !item.parent ? level : find(navItem.filter(parentItem => parentItem.id === item.parent)[0], ++level)\n          }\n\n          navItem.forEach(item => {\n            item.level = find(item)\n          })\n          this.setNavigation(navItem)\n        })\n      })\n    },\n    initEpub (url) {\n      this.book = new Epub(url)\n      this.setCurrentBook(this.book)\n      this.initRendition()\n      // this.initGesture()\n      this.parseBook()\n      this.book.ready.then(() => {\n        return this.book.locations.generate(750 * (window.innerWidth / 375 * (getFontSize(this.fileName) / 16)))\n          .then(location => {\n            this.setBookAvailable(true)\n            this.refreshLocation()\n          })\n      })\n    }\n  },\n  mounted () {\n    const books = this.$route.params.fileName.split('|')\n    const fileName = books[1]\n    getLocalForage(fileName, (err, blob) => {\n      if (!err && blob) {\n        this.setFileName(books.join('/')).then(() => {\n          this.initEpub(blob)\n        })\n      } else {\n        this.setFileName(books.join('/')).then(() => {\n          const url = `${process.env.VUE_APP_EPUB_URL}/${this.fileName}.epub`\n          this.initEpub(url)\n        })\n      }\n    })\n  },\n  data () {\n    return {\n\n    }\n  }\n}\n</script>\n\n<style lang='scss' scoped>\n  @import \"../../assets/styles/global.scss\";\n  .ebook-reader{\n    width: 100%;\n    height: 100%;\n    overflow: hidden;\n    .ebook-reader-mask{\n      position: absolute;\n      width: 100%;\n      height: 100%;\n      z-index: 150;\n      top: 0;\n      left: 0;\n      background: transparent;\n    }\n  }\n</style>\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"ebook-reader\"},[_c('div',{attrs:{\"id\":\"read\"}}),_c('div',{staticClass:\"ebook-reader-mask\",on:{\"click\":_vm.onMaskClick,\"touchmove\":_vm.move,\"touchend\":_vm.moveEnd,\"mousedown\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"left\",37,$event.key,[\"Left\",\"ArrowLeft\"])){ return null; }if('button' in $event && $event.button !== 0){ return null; }return _vm.onMouseEnter($event)},\"mousemove\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"left\",37,$event.key,[\"Left\",\"ArrowLeft\"])){ return null; }if('button' in $event && $event.button !== 0){ return null; }return _vm.onMouseMove($event)},\"mouseup\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"left\",37,$event.key,[\"Left\",\"ArrowLeft\"])){ return null; }if('button' in $event && $event.button !== 0){ return null; }return _vm.onMouseEnd($event)}}})])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EbookReader.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EbookReader.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./EbookReader.vue?vue&type=template&id=34236c03&scoped=true&\"\nimport script from \"./EbookReader.vue?vue&type=script&lang=js&\"\nexport * from \"./EbookReader.vue?vue&type=script&lang=js&\"\nimport style0 from \"./EbookReader.vue?vue&type=style&index=0&id=34236c03&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"34236c03\",\n  null\n  \n)\n\nexport default component.exports","'use strict';\nvar $at = require('./_string-at')(true);\n\n// 21.1.3.27 String.prototype[@@iterator]()\nrequire('./_iter-define')(String, 'String', function (iterated) {\n  this._t = String(iterated); // target\n  this._i = 0;                // next index\n// 21.1.5.2.1 %StringIteratorPrototype%.next()\n}, function () {\n  var O = this._t;\n  var index = this._i;\n  var point;\n  if (index >= O.length) return { value: undefined, done: true };\n  point = $at(O, index);\n  this._i += point.length;\n  return { value: point, done: false };\n});\n","var dP = require('./_object-dp').f;\nvar FProto = Function.prototype;\nvar nameRE = /^\\s*function ([^ (]*)/;\nvar NAME = 'name';\n\n// 19.2.4.2 name\nNAME in FProto || require('./_descriptors') && dP(FProto, NAME, {\n  configurable: true,\n  get: function () {\n    try {\n      return ('' + this).match(nameRE)[1];\n    } catch (e) {\n      return '';\n    }\n  }\n});\n","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EbookReader.vue?vue&type=style&index=0&id=34236c03&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EbookReader.vue?vue&type=style&index=0&id=34236c03&lang=scss&scoped=true&\"","// 7.2.8 IsRegExp(argument)\nvar isObject = require('./_is-object');\nvar cof = require('./_cof');\nvar MATCH = require('./_wks')('match');\nmodule.exports = function (it) {\n  var isRegExp;\n  return isObject(it) && ((isRegExp = it[MATCH]) !== undefined ? !!isRegExp : cof(it) == 'RegExp');\n};\n"],"sourceRoot":""}