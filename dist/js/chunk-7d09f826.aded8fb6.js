(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7d09f826","chunk-08ef3dbd"],{"0f96":function(t,e,i){"use strict";var s=i("b42b"),n=i.n(s);n.a},"16b8":function(t,e,i){"use strict";var s=i("f00a"),n=i.n(s);n.a},"1e84":function(t,e,i){"use strict";var s=i("e3d7"),n=i.n(s);n.a},"1eaf":function(t,e,i){},"21b9":function(t,e,i){"use strict";var s=i("3af4"),n=i.n(s);n.a},"28a5":function(t,e,i){"use strict";var s=i("aae3"),n=i("cb7c"),o=i("ebd6"),a=i("0390"),r=i("9def"),c=i("5f1b"),l=i("520a"),u=i("79e5"),f=Math.min,h=[].push,d="split",m="length",p="lastIndex",v=4294967295,b=!u(function(){RegExp(v,"y")});i("214f")("split",2,function(t,e,i,u){var k;return k="c"=="abbc"[d](/(b)*/)[1]||4!="test"[d](/(?:)/,-1)[m]||2!="ab"[d](/(?:ab)*/)[m]||4!="."[d](/(.?)(.?)/)[m]||"."[d](/()()/)[m]>1||""[d](/.?/)[m]?function(t,e){var n=String(this);if(void 0===t&&0===e)return[];if(!s(t))return i.call(n,t,e);var o,a,r,c=[],u=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),f=0,d=void 0===e?v:e>>>0,b=new RegExp(t.source,u+"g");while(o=l.call(b,n)){if(a=b[p],a>f&&(c.push(n.slice(f,o.index)),o[m]>1&&o.index<n[m]&&h.apply(c,o.slice(1)),r=o[0][m],f=a,c[m]>=d))break;b[p]===o.index&&b[p]++}return f===n[m]?!r&&b.test("")||c.push(""):c.push(n.slice(f)),c[m]>d?c.slice(0,d):c}:"0"[d](void 0,0)[m]?function(t,e){return void 0===t&&0===e?[]:i.call(this,t,e)}:i,[function(i,s){var n=t(this),o=void 0==i?void 0:i[e];return void 0!==o?o.call(i,n,s):k.call(String(n),i,s)},function(t,e){var s=u(k,t,this,e,k!==i);if(s.done)return s.value;var l=n(t),h=String(this),d=o(l,RegExp),m=l.unicode,p=(l.ignoreCase?"i":"")+(l.multiline?"m":"")+(l.unicode?"u":"")+(b?"y":"g"),g=new d(b?l:"^(?:"+l.source+")",p),y=void 0===e?v:e>>>0;if(0===y)return[];if(0===h.length)return null===c(g,h)?[h]:[];var C=0,w=0,x=[];while(w<h.length){g.lastIndex=b?w:0;var _,S=c(g,b?h:h.slice(w));if(null===S||(_=f(r(g.lastIndex+(b?0:w)),h.length))===C)w=a(h,w,m);else{if(x.push(h.slice(C,w)),x.length===y)return x;for(var T=1;T<=S.length-1;T++)if(x.push(S[T]),x.length===y)return x;w=C=_}}return x.push(h.slice(C)),x}]})},"2e37":function(t,e,i){"use strict";var s=i("c956"),n=i.n(s);n.a},3105:function(t,e,i){},3846:function(t,e,i){i("9e1e")&&"g"!=/./g.flags&&i("86cc").f(RegExp.prototype,"flags",{configurable:!0,get:i("0bfb")})},"385c":function(t,e,i){"use strict";(function(t){i("28a5"),i("5df3"),i("ac6a"),i("7f7f");var s=i("ac0d"),n=i("a211"),o=i("5de6"),a=i("e8ec"),r=i("101f");t.ePub=n["a"],e["a"]={mixins:[s["a"]],methods:{onMouseEnter:function(t){this.mouseState=1,this.mouseStartTime=t.timeStamp,t.preventDefault(),t.stopPropagation()},onMouseMove:function(t){if(1===this.mouseState)this.mouseState=2;else if(2===this.mouseState){var e=0;this.firstOffsetY?(e=t.clientY-this.firstOffsetY,this.setOffsetY(e)):this.firstOffsetY=t.clientY}t.preventDefault(),t.stopPropagation()},onMouseEnd:function(t){2===this.mouseState?(this.setOffsetY(0),this.firstOffsetY=null,this.mouseState=3):this.mouseState=4;var e=t.timeStamp-this.mouseStartTime;e<200&&(this.mouseState=4),t.preventDefault(),t.stopPropagation()},move:function(t){var e=0;this.firstOffsetY?(e=t.changedTouches[0].clientY-this.firstOffsetY,this.setOffsetY(e)):this.firstOffsetY=t.changedTouches[0].clientY,t.preventDefault(),t.stopPropagation()},moveEnd:function(t){this.setOffsetY(0),this.firstOffsetY=null},onMaskClick:function(t){if(!this.mouseState||2!==this.mouseState&&3!==this.mouseState){var e=t.offsetX,i=window.innerWidth;e>0&&e<.3*i?this.prevPage():e>0&&e>.7*i?this.nextPage():this.toggleTitleAndMenu()}},prevPage:function(){var t=this;this.rendition&&(this.rendition.prev().then(function(){t.refreshLocation()}),this.hideTitleAndMenu())},nextPage:function(){var t=this;this.rendition&&(this.rendition.next().then(function(){t.refreshLocation()}),this.hideTitleAndMenu())},toggleTitleAndMenu:function(){this.menuVisible&&(this.setSettingVisible(-1),this.setFontFamilyVisible(!1)),this.setMenuVisible(!this.menuVisible)},initFontSize:function(){var t=Object(a["e"])(this.fileName);t?(this.rendition.themes.fontSize(t+"px"),this.setDefaultFontSize(t)):Object(a["o"])(this.fileName,this.defaultFontSize)},initFontFamily:function(){var t=Object(a["d"])(this.fileName);t?(this.rendition.themes.font(t),this.setDefaultFontFamily(t)):Object(a["n"])(this.fileName,this.defaultFontFamily)},initTheme:function(){var t=this,e=Object(a["j"])(this.fileName);e||(e=this.themeList[0].name,Object(a["s"])(this.fileName,e)),this.setDefaultTheme(e),this.themeList.forEach(function(e){t.rendition.themes.register(e.name,e.style)}),this.rendition.themes.select(e)},initRendition:function(){var t=this;this.rendition=this.book.renderTo("read",{width:innerWidth,height:innerHeight,methods:"default"});var e=Object(a["h"])(this.fileName);this.display(e,function(){t.initTheme(),t.initFontSize(),t.initFontFamily(),t.initGlobalStyle()}),this.rendition.hooks.content.register(function(t){Promise.all([t.addStylesheet("".concat("http://47.99.166.157/book/res","/fonts/daysOne.css")),t.addStylesheet("".concat("http://47.99.166.157/book/res","/fonts/cabin.css")),t.addStylesheet("".concat("http://47.99.166.157/book/res","/fonts/montserrat.css")),t.addStylesheet("".concat("http://47.99.166.157/book/res","/fonts/tangerine.css"))]).then(function(){})})},initGesture:function(){var t=this;this.rendition.on("touchstart",function(e){t.touchStartX=e.changedTouches[0].clientX,t.touchStartTime=e.timeStamp}),this.rendition.on("touchend",function(e){var i=e.changedTouches[0].clientX-t.touchStartX,s=e.timeStamp-t.touchStartTime;s<500&&i>40?t.prevPage():s<500&&i<-40?t.nextPage():t.toggleTitleAndMenu(),e.preventDefault(),e.stopPropagation()}),this.rendition.on("touchmove",function(t){})},parseBook:function(){var t=this;this.book.loaded.cover.then(function(e){t.book.archive.createUrl(e).then(function(e){t.setCover(e)}),t.book.loaded.metadata.then(function(e){t.setMetadata(e)}),t.book.loaded.navigation.then(function(e){var i=Object(o["d"])(e.toc);function s(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t.parent?s(i.filter(function(e){return e.id===t.parent})[0],++e):e}i.forEach(function(t){t.level=s(t)}),t.setNavigation(i)})})},initEpub:function(t){var e=this;this.book=new n["a"](t),this.setCurrentBook(this.book),this.initRendition(),this.parseBook(),this.book.ready.then(function(){return e.book.locations.generate(window.innerWidth/375*(Object(a["e"])(e.fileName)/16)*750).then(function(t){e.setBookAvailable(!0),e.refreshLocation()})})}},mounted:function(){var t=this,e=this.$route.params.fileName.split("|"),i=e[1];Object(r["b"])(i,function(i,s){!i&&s?t.setFileName(e.join("/")).then(function(){t.initEpub(s)}):t.setFileName(e.join("/")).then(function(){var e="".concat("http://47.99.166.157/epub","/").concat(t.fileName,".epub");t.initEpub(e)})})},data:function(){return{}}}}).call(this,i("c8ba"))},"3af4":function(t,e,i){},"43f8":function(t,e,i){},"4dca":function(t,e,i){"use strict";var s=i("d50e"),n=i.n(s);n.a},"4e77":function(t,e,i){"use strict";var s=i("9c3c"),n=i.n(s);n.a},"4eea":function(t,e,i){"use strict";var s=i("f6c3"),n=i.n(s);n.a},5118:function(t,e,i){(function(t){var s="undefined"!==typeof t&&t||"undefined"!==typeof self&&self||window,n=Function.prototype.apply;function o(t,e){this._id=t,this._clearFn=e}e.setTimeout=function(){return new o(n.call(setTimeout,s,arguments),clearTimeout)},e.setInterval=function(){return new o(n.call(setInterval,s,arguments),clearInterval)},e.clearTimeout=e.clearInterval=function(t){t&&t.close()},o.prototype.unref=o.prototype.ref=function(){},o.prototype.close=function(){this._clearFn.call(s,this._id)},e.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},e.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},e._unrefActive=e.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;e>=0&&(t._idleTimeoutId=setTimeout(function(){t._onTimeout&&t._onTimeout()},e))},i("6017"),e.setImmediate="undefined"!==typeof self&&self.setImmediate||"undefined"!==typeof t&&t.setImmediate||this&&this.setImmediate,e.clearImmediate="undefined"!==typeof self&&self.clearImmediate||"undefined"!==typeof t&&t.clearImmediate||this&&this.clearImmediate}).call(this,i("c8ba"))},5158:function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"ebook-reader"},[i("div",{attrs:{id:"read"}}),i("div",{staticClass:"ebook-reader-mask",on:{click:t.onMaskClick,touchmove:t.move,touchend:t.moveEnd,mousedown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"left",37,e.key,["Left","ArrowLeft"])?null:"button"in e&&0!==e.button?null:t.onMouseEnter(e)},mousemove:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"left",37,e.key,["Left","ArrowLeft"])?null:"button"in e&&0!==e.button?null:t.onMouseMove(e)},mouseup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"left",37,e.key,["Left","ArrowLeft"])?null:"button"in e&&0!==e.button?null:t.onMouseEnd(e)}}})])},n=[],o=i("385c"),a=o["a"],r=(i("962e"),i("2877")),c=Object(r["a"])(a,s,n,!1,null,"34236c03",null);e["default"]=c.exports},"515f":function(t,e,i){"use strict";var s=i("1eaf"),n=i.n(s);n.a},"51a1":function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{ref:"ebook",staticClass:"ebook"},[i("ebook-book-mark"),i("ebook-header"),i("ebook-title"),i("ebook-reader"),i("ebook-menu"),i("ebook-footer")],1)},n=[],o=i("5158"),a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("transition",{attrs:{name:"slide-down"}},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.menuVisible,expression:"menuVisible"}],staticClass:"title-wrapper"},[i("div",{staticClass:"left"},[i("span",{staticClass:"icon-back",on:{click:t.back}})]),i("div",{staticClass:"right"},[i("div",{staticClass:"icon-wrapper"},[i("span",{staticClass:"icon-shelf "})]),i("div",{staticClass:"icon-wrapper"},[i("span",{staticClass:"icon-cart "})]),i("div",{staticClass:"icon-wrapper"},[i("span",{staticClass:"icon-more "})])])])])},r=[],c=i("ac0d"),l={mixins:[c["a"]],data:function(){return{}},methods:{back:function(){this.$router.go(-1)}}},u=l,f=(i("2e37"),i("2877")),h=Object(f["a"])(u,a,r,!1,null,"aed705a8",null),d=h.exports,m=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("transition",{attrs:{name:"slide-up"}},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.menuVisible,expression:"menuVisible"}],staticClass:"menu-wrapper",class:{"hide-box-shadow":!t.menuVisible||t.settingVisible>=0}},[i("div",{staticClass:"icon-wrapper"},[i("span",{staticClass:"icon-menu",on:{click:function(e){return t.showSetting(3)}}})]),i("div",{staticClass:"icon-wrapper"},[i("span",{staticClass:"icon-progress",on:{click:function(e){return t.showSetting(2)}}})]),i("div",{staticClass:"icon-wrapper"},[i("span",{staticClass:"icon-bright",on:{click:function(e){return t.showSetting(1)}}})]),i("div",{staticClass:"icon-wrapper"},[i("span",{staticClass:"icon-A",on:{click:function(e){return t.showSetting(0)}}})])])]),i("ebook-setting-font"),i("ebook-setting-font-popup"),i("ebook-setting-theme"),i("ebook-setting-progress"),i("ebook-slide")],1)},p=[],v=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("transition",{attrs:{name:"slide-up"}},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.menuVisible&&0===t.settingVisible,expression:"menuVisible && settingVisible === 0"}],staticClass:"setting-wrapper"},[i("div",{staticClass:"setting-font-size"},[i("div",{staticClass:"preview",style:{fontSize:t.fontSizeList[0].fontSize+"px"}},[t._v("A")]),i("div",{staticClass:"select"},t._l(t.fontSizeList,function(e,s){return i("div",{key:s,staticClass:"select-wrapper",on:{click:function(i){return t.setFontSize(e.fontSize)}}},[i("div",{staticClass:"line"}),i("div",{staticClass:"point-wrapper"},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.defaultFontSize===e.fontSize,expression:"defaultFontSize === item.fontSize"}],staticClass:"point"},[i("div",{staticClass:"small-point"})])]),i("div",{staticClass:"line"})])}),0),i("div",{staticClass:"preview",style:{fontSize:t.fontSizeList[t.fontSizeList.length-1].fontSize+"px"}},[t._v("A")])]),i("div",{staticClass:"setting-font-family",on:{click:t.showFontFamilyPopup}},[i("div",{staticClass:"setting-font-family-text-wrapper"},[i("span",{staticClass:"setting-font-family-text"},[t._v(t._s(t.defaultFontFamily))])]),i("div",{staticClass:"setting-font-family-icon-wrapper"},[i("span",{staticClass:"icon-forward"})])])])])},b=[],k=i("5de6"),g=i("e8ec"),y={mixins:[c["a"]],data:function(){return{fontSizeList:k["b"]}},methods:{setFontSize:function(t){this.setDefaultFontSize(t),Object(g["o"])(this.fileName,t),this.currentBook.rendition.themes.fontSize(t+"px")},showFontFamilyPopup:function(){this.setFontFamilyVisible(!0)}}},C=y,w=(i("a8d4"),Object(f["a"])(C,v,b,!1,null,"b51a616e",null)),x=w.exports,_=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("transition",{attrs:{name:"popup-slide-up"}},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.fontFamilyVisible,expression:"fontFamilyVisible"}],staticClass:"ebook-popup-list"},[i("div",{staticClass:"ebook-popup-title"},[i("div",{staticClass:"ebook-popup-title-icon",on:{click:t.hide}},[i("span",{staticClass:"icon-down2"})]),i("span",{staticClass:"ebook-popup-title-text"},[t._v(t._s(t.$t("book.selectFont")))])]),i("div",{staticClass:"ebook-popup-list-wrapper"},t._l(t.fontFamilyList,function(e,s){return i("div",{key:s,staticClass:"ebook-popup-item",on:{click:function(i){return t.setFontFamily(e.font)}}},[i("div",{staticClass:"ebook-popup-item-text",class:{selected:t.isSelected(e)}},[t._v("\n                     "+t._s(e.font)+"\n                 ")]),t.isSelected(e)?i("div",{staticClass:"ebook-popup-item-check"},[i("span",{staticClass:"icon-check"})]):t._e()])}),0)])])},S=[],T={mixins:[c["a"]],data:function(){return{fontFamilyList:k["a"]}},methods:{hide:function(){this.setFontFamilyVisible(!1)},isSelected:function(t){return this.defaultFontFamily===t.font},setFontFamily:function(t){this.setDefaultFontFamily(t),Object(g["n"])(this.fileName,t),"Default"===t?this.currentBook.rendition.themes.font("Times New Roman"):this.currentBook.rendition.themes.font(t)}},mounted:function(){}},O=T,F=(i("21b9"),Object(f["a"])(O,_,S,!1,null,"cc6a1700",null)),j=F.exports,E=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("transition",{attrs:{name:"slide-up"}},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.menuVisible&&1===t.settingVisible,expression:"menuVisible && settingVisible === 1"}],staticClass:"setting-wrapper"},[i("div",{staticClass:"setting-theme"},t._l(t.themeList,function(e,s){return i("div",{key:s,staticClass:"setting-theme-item",on:{click:function(e){return t.setTheme(s)}}},[i("div",{staticClass:"preview",class:{selected:e.name===t.defaultTheme},style:{background:e.style.body.background}}),i("div",{staticClass:"text",class:{selected:e.name===t.defaultTheme}},[t._v(t._s(e.alias))])])}),0)])])},$=[],V=(i("7f7f"),{mixins:[c["a"]],methods:{setTheme:function(t){var e=this,i=this.themeList[t];this.setDefaultTheme(i.name).then(function(){e.currentBook.rendition.themes.select(e.defaultTheme),e.initGlobalStyle()}),Object(g["s"])(this.fileName,i.name)}}}),N=V,P=(i("cc43"),Object(f["a"])(N,E,$,!1,null,"757a2192",null)),B=P.exports,I=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("transition",{attrs:{name:"slide-up"}},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.menuVisible&&2===t.settingVisible,expression:"menuVisible && settingVisible === 2"}],staticClass:"setting-wrapper"},[i("div",{staticClass:"setting-progress"},[i("div",{staticClass:"read-time-wrapper"},[i("span",{staticClass:"read-time-text"},[t._v("\n            "+t._s(t.getReadTimeText())+"\n            ")]),i("span",{staticClass:"icon-forward"})]),i("div",{staticClass:"progress-wrapper"},[i("div",{staticClass:"progress-icon-wrapper",on:{click:function(e){return t.prevSection()}}},[i("span",{staticClass:"icon-back"})]),i("input",{ref:"progress",staticClass:"progress",attrs:{type:"range",max:"100",min:"0",step:"1",disabled:!t.bookAvailable},domProps:{value:t.progress},on:{change:function(e){return t.onProgressChange(e.target.value)},input:function(e){return t.onProgressInput(e.target.value)}}}),i("div",{staticClass:"progress-icon-wrapper",on:{click:function(e){return t.nextSection()}}},[i("span",{staticClass:"icon-forward"})])]),i("div",{staticClass:"text-wrapper"},[i("span",{staticClass:"progress-section-text"},[t._v("\n            "+t._s(t.getSectionName)+"\n            ")]),i("span",[t._v("("+t._s(t.bookAvailable?t.progress+"%":"加载中...")+")")])])])])])},M=[],L={mixins:[c["a"]],methods:{onProgressChange:function(t){var e=this;this.setProgress(t).then(function(){e.displayProgress(),e.updateProgressBg()})},onProgressInput:function(t){var e=this;this.setProgress(t).then(function(){e.updateProgressBg()})},displayProgress:function(){var t=this.currentBook.locations.cfiFromPercentage(this.progress/100);this.display(t)},updateProgressBg:function(){this.$refs.progress.style.backgroundSize="".concat(this.progress,"% 100%")},prevSection:function(){var t=this;this.section>0&&this.bookAvailable&&this.setSection(this.section-1).then(function(){t.displaySection()})},nextSection:function(){var t=this;this.section<this.currentBook.spine.length-1&&this.bookAvailable&&this.setSection(this.section+1).then(function(){t.displaySection()})},displaySection:function(){var t=this.currentBook.section(this.section);t&&t.href&&this.display(t.href)}},updated:function(){this.updateProgressBg()}},A=L,z=(i("4e77"),Object(f["a"])(A,I,M,!1,null,"6b60160b",null)),D=z.exports,Y=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("transition",{attrs:{name:"fade"}},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.menuVisible&&3===t.settingVisible,expression:"menuVisible &&\n     settingVisible===3"}],staticClass:"slide-content-wrapper"},[i("transition",{attrs:{name:"slide-right"}},[3===t.settingVisible?i("div",{staticClass:"content"},[t.bookAvailable?i("div",{staticClass:"content-page-wrapper"},[i("div",{staticClass:"content-page"},[i(1===t.currentTab?t.content:t.bookmark,{tag:"component"})],1),i("div",{staticClass:"content-page-tab"},[i("div",{staticClass:"content-page-tab-item",class:{selected:1===t.currentTab},on:{click:function(e){return t.selectTab(1)}}},[t._v("\n                     "+t._s(t.$t("book.navigation"))+"\n                     ")]),i("div",{staticClass:"content-page-tab-item",class:{selected:2===t.currentTab},on:{click:function(e){return t.selectTab(2)}}},[t._v("\n                     "+t._s(t.$t("book.bookmark"))+"\n                     ")])])]):i("div",{staticClass:"content-empty"},[i("ebook-loading")],1)]):t._e()]),i("div",{staticClass:"content-bg",on:{click:function(e){return t.hide()}}})],1)])},W=[],R=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"ebook-loading"},[i("div",{staticClass:"ebook-loading-wrapper"},[t._l(t.data,function(e,s){return i("div",{key:s,staticClass:"ebook-loading-item"},t._l(e,function(t,e){return i("div",{key:e,staticClass:"ebook-loading-line-wrapper"},[i("div",{ref:"line",refInFor:!0,staticClass:"ebook-loading-line"}),i("div",{ref:"mask",refInFor:!0,staticClass:"ebook-loading-mask"})])}),0)}),i("div",{staticClass:"ebook-loading-center"})],2)])},H=[],X=(i("ac6a"),i("5118")),K=i("fa7d"),G={data:function(){return{data:[[{},{},{}],[{},{},{}]],maskWidth:[{value:0},{value:0},{value:0},{value:0},{value:0},{value:0}],lineWidth:[{value:16},{value:16},{value:16},{value:16},{value:16},{value:16}],add:!0,end:!1}},mounted:function(){var t=this;this.task=Object(X["setInterval"])(function(){t.$refs.mask.forEach(function(e,i){var s=t.$refs.mask[i],n=t.$refs.line[i],o=t.maskWidth[i],a=t.lineWidth[i];if(0===i)t.add&&o.value<16?(o.value++,a.value--):!t.add&&a.value<16&&(o.value--,a.value++);else if(t.add){var r=t.maskWidth[i-1];r.value>=8&&(o.value++,a.value--)}else if(!t.add&&a.value<16){var c=t.lineWidth[i-1];c.value>=8&&(o.value--,a.value++)}s.style.width="".concat(Object(K["a"])(o.value),"rem"),s.style.flex="0 0 ".concat(Object(K["a"])(o.value),"rem"),n.style.flex="0 0 ".concat(Object(K["a"])(a.value),"rem"),n.style.width="".concat(Object(K["a"])(a.value),"rem"),i===t.maskWidth.length-1&&(t.add?16===o.value&&(t.end=!0):0===o.value&&(t.end=!0)),t.end&&(t.add=!t.add,t.end=!1)})},20)}},J=G,U=(i("6e95"),Object(f["a"])(J,R,H,!1,null,"4feed5ac",null)),q=U.exports,Q=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"ebook-slide-contents"},[i("div",{staticClass:"slide-contents-search-wrapper"},[i("div",{staticClass:"slide-contents-search-input-wrapper"},[t._m(0),i("input",{directives:[{name:"model",rawName:"v-model",value:t.searchText,expression:"searchText"}],staticClass:"slide-contents-search-input",attrs:{type:"text",placeholder:t.$t("book.searchHint")},domProps:{value:t.searchText},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:e.ctrlKey||e.shiftKey||e.altKey||e.metaKey?null:t.search()},click:t.showSearchPage,input:function(e){e.target.composing||(t.searchText=e.target.value)}}})]),t.searchVisible?i("div",{staticClass:"slide-contents-search-cancel",on:{click:function(e){return t.hideSearchPage()}}},[t._v(t._s(t.$t("book.cancel")))]):t._e()]),i("div",{directives:[{name:"show",rawName:"v-show",value:!t.searchVisible,expression:"!searchVisible"}],staticClass:"slide-contents-book-wrapper"},[i("div",{staticClass:"slide-contents-book-img-wrapper"},[i("img",{staticClass:"slide-contents-book-img",attrs:{src:t.cover,alt:""}})]),i("div",{staticClass:"slide-contents-book-info-wrapper"},[i("div",{staticClass:"slide-contents-book-title"},[i("span",{staticClass:"slide-contents-book-title-text"},[t._v(t._s(t.metadata.title))])]),i("div",{staticClass:"slide-contents-book-author"},[i("span",{staticClass:"slide-contents-book-author-text"},[t._v(t._s(t.metadata.creator))])])]),i("div",{staticClass:"slide-contents-book-progress-wrapper"},[i("div",{staticClass:"slide-contents-book-progress"},[i("span",{staticClass:"progress"},[t._v(t._s(t.progress+"%"))]),i("span",{staticClass:"progress-text"},[t._v(t._s(t.$t("book.haveRead2")))])]),i("div",{staticClass:"slide-contents-book-time"},[t._v(t._s(t.getReadTimeText()))])])]),i("scoroll",{directives:[{name:"show",rawName:"v-show",value:!t.searchVisible,expression:"!searchVisible"}],staticClass:"slide-contents-list",attrs:{top:156,bottom:48}},t._l(t.navigation,function(e,s){return i("div",{key:s,staticClass:"slide-contents-item"},[i("span",{staticClass:"slide-contents-item-label",class:{selected:t.section===s},style:t.contentItemStyle(e),on:{click:function(i){return t.displayContent(e.href)}}},[t._v(t._s(e.label))]),i("span",{staticClass:"slide-contents-item-page"})])}),0),i("scoroll",{directives:[{name:"show",rawName:"v-show",value:t.searchVisible,expression:"searchVisible"}],staticClass:"slide-search-list",attrs:{top:66,bottom:48}},t._l(t.searchList,function(e,s){return i("div",{key:s,staticClass:"slide-search-item",domProps:{innerHTML:t._s(e.excerpt)},on:{click:function(i){return t.displayContent(e.cfi,!0)}}})}),0)],1)},Z=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"slide-contents-search-icon"},[i("span",{staticClass:"icon-search"})])}],tt=(i("a481"),i("7514"),i("5df3"),i("6701")),et={mixins:[c["a"]],components:{Scoroll:tt["a"]},data:function(){return{searchVisible:!1,searchList:null,searchText:""}},methods:{doSearch:function(t){var e=this;return Promise.all(this.currentBook.spine.spineItems.map(function(i){return i.load(e.currentBook.load.bind(e.currentBook)).then(i.find.bind(i,t)).finally(i.unload.bind(i))})).then(function(t){return Promise.resolve([].concat.apply([],t))})},displayContent:function(t){var e=this,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.display(t,function(){e.hideTitleAndMenu(),i&&e.currentBook.rendition.annotations.highlight(t)})},contentItemStyle:function(t){return{marginLeft:"".concat(Object(K["a"])(15*t.level),"rem")}},search:function(){var t=this;this.searchText&&this.searchText.length>0&&this.doSearch(this.searchText).then(function(e){t.searchList=e,t.searchList.map(function(e){return e.excerpt=e.excerpt.replace(t.searchText,"<span class='content-search-text'>\n              ".concat(t.searchText,"\n            </span>")),e})})},showSearchPage:function(){this.searchVisible=!0},hideSearchPage:function(){this.searchVisible=!1,this.searchText="",this.searchList=null}},mounted:function(){}},it=et,st=(i("8ec6"),Object(f["a"])(it,Q,Z,!1,null,"10ade18d",null)),nt=st.exports,ot=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"ebook-slide-bookmark"},[i("div",{staticClass:"slide-bookmark-title"},[t._v(t._s(t.$t("book.bookmark"))+" · "+t._s(t.bookmark?t.bookmark.length:0))]),i("scroll",{staticClass:"slide-bookmark-list",attrs:{top:48,bottom:48}},t._l(t.bookmark,function(e,s){return i("div",{key:s,staticClass:"slide-bookmark-item",on:{click:function(i){return t.displayBookmark(e.cfi)}}},[i("div",{staticClass:"slide-bookmark-item-icon"},[i("div",{staticClass:"icon-bookmark"})]),i("div",{staticClass:"slide-bookmark-item-text"},[t._v(t._s(e.text))])])}),0)],1)},at=[],rt={mixins:[c["a"]],components:{Scroll:tt["a"]},data:function(){return{bookmark:null}},methods:{displayBookmark:function(t){var e=this;this.display(t,function(){e.hideTitleAndMenu()})}},mounted:function(){this.bookmark=Object(g["c"])(this.fileName)}},ct=rt,lt=(i("515f"),Object(f["a"])(ct,ot,at,!1,null,"3d20fcb8",null)),ut=lt.exports,ft={mixins:[c["a"]],components:{EbookLoading:q,EbookSlideBookmark:ut},data:function(){return{currentTab:1,content:nt,bookmark:ut}},methods:{hide:function(){this.hideTitleAndMenu()},selectTab:function(t){this.currentTab=t}}},ht=ft,dt=(i("16b8"),Object(f["a"])(ht,Y,W,!1,null,"945b94b4",null)),mt=dt.exports,pt={components:{EbookSettingFont:x,EbookSettingFontPopup:j,EbookSettingTheme:B,EbookSettingProgress:D,EbookSlide:mt},mixins:[c["a"]],data:function(){return{}},methods:{showSetting:function(t){this.setSettingVisible(t)}}},vt=pt,bt=(i("4dca"),Object(f["a"])(vt,m,p,!1,null,"b31ba9e8",null)),kt=bt.exports,gt=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"ebook-header"},[i("span",{staticClass:"ebook-header-text"},[t._v(t._s(t.getSectionName))])])},yt=[],Ct={mixins:[c["a"]]},wt=Ct,xt=(i("0f96"),Object(f["a"])(wt,gt,yt,!1,null,"18c85902",null)),_t=xt.exports,St=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"ebook-footer"},[i("span",{staticClass:"ebook-footer-text"},[t._v(t._s(this.progress+"%"))])])},Tt=[],Ot={mixins:[c["a"]]},Ft=Ot,jt=(i("1e84"),Object(f["a"])(Ft,St,Tt,!1,null,"12824ef1",null)),Et=jt.exports,$t=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{ref:"bookmark",staticClass:"ebook-bookmark"},[i("div",{staticClass:"ebook-bookmark-text-wrapper"},[i("div",{ref:"iconDown",staticClass:"ebook-bookmark-down-wrapper"},[i("span",{staticClass:"icon-down"})]),i("div",{staticClass:"ebook-bookmark-text"},[t._v(t._s(t.text))])]),i("div",{staticClass:"ebook-bookmark-icon-wrapper",style:t.isFixed?t.fixedStyle:{}},[i("book-mask",{attrs:{color:t.color,width:15,height:35}})],1)])},Vt=[],Nt=(i("6b54"),function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{ref:"bookmark",staticClass:"bookmark",style:t.style})}),Pt=[],Bt=(i("c5f6"),{data:function(){return{}},computed:{style:function(){return this.color?{borderColor:"".concat(this.color," ").concat(this.color," transparent ").concat(this.color)}:{}}},methods:{refresh:function(){this.height&&this.width&&(this.$refs.bookmark.style.borderWidth="".concat(Object(K["a"])(this.height-5),"rem\n        ").concat(Object(K["a"])(this.width/2),"rem ").concat(Object(K["a"])(5),"rem ").concat(Object(K["a"])(this.width/2),"rem\n        "))}},mounted:function(){this.refresh()},props:{width:Number,height:Number,color:String}}),It=Bt,Mt=(i("4eea"),Object(f["a"])(It,Nt,Pt,!1,null,"78346557",null)),Lt=Mt.exports,At="#346cbc",zt="#fff",Dt={components:{BookMask:Lt},mixins:[c["a"]],computed:{height:function(){return Object(K["b"])(35)},threshold:function(){return Object(K["b"])(55)},fixedStyle:function(){return{position:"fixed",top:0,right:"{".concat(window.innerWidth-this.$refs.bookmark.clientWidth,"}")}}},watch:{offsetY:function(t){!this.bookAvailable||this.menuVisable||this.settingVislble>=0||(t>=this.height&&t<=this.threshold?this.beforeThreshold(t):t>=this.threshold?this.afterThreshold(t):t>0&&t<this.height?this.beforeHeight():0===t&&this.restore())},isBookmark:function(t){this.isFixed=t,this.color=t?At:zt}},data:function(){return{text:"",color:zt,isFixed:!1}},methods:{addBookmark:function(){var t=this;this.bookmark=Object(g["c"])(this.fileName),this.bookmark||(this.bookmark=[]);var e=this.currentBook.rendition.currentLocation(),i=e.start.cfi.replace(/!.*/,""),s=e.start.cfi.replace(/.*!/,"").replace(/\)$/,""),n=e.end.cfi.replace(/.*!/,"").replace(/\)$/,""),o="".concat(i,"!,").concat(s,",").concat(n,")");this.currentBook.getRange(o).then(function(i){var s=i.toString().replace(/\s\s/g,"");t.bookmark.push({cfi:e.start.cfi,text:s}),Object(g["m"])(t.fileName,t.bookmark)})},removeBookmark:function(){var t=this.currentBook.rendition.currentLocation(),e=t.start.cfi;this.bookmark=Object(g["c"])(this.fileName),this.bookmark&&(Object(g["m"])(this.fileName,this.bookmark.filter(function(t){return t.cfi!==e})),this.setIsBookmark(!1))},restore:function(){var t=this;setTimeout(function(){t.$refs.bookmark.style.top="".concat(-t.height,"px"),t.$refs.iconDown.style.transform="rotate(0deg)"},200),this.isFixed?(this.setIsBookmark(!0),this.addBookmark()):(this.setIsBookmark(!1),this.removeBookmark())},beforeHeight:function(){this.isBookmark?(this.text=this.$t("book.pulldownDeleteMark"),this.color=At,this.isFixed=!0):(this.text=this.$t("book.pulldownAddMark"),this.color=zt,this.isFixed=!1)},beforeThreshold:function(t){var e=this.$refs.iconDown;this.$refs.bookmark.style.top="".concat(-t,"px"),this.beforeHeight(),"rotate(180deg)"===e.style.transform&&(e.style.transform="rotate(0deg)")},afterThreshold:function(t){var e=this.$refs.iconDown;this.$refs.bookmark.style.top="".concat(-t,"px"),this.isBookmark?(this.text=this.$t("book.releaseDeleteMark"),this.color=zt,this.isFixed=!1):(this.text=this.$t("book.releaseAddMark"),this.color=At,this.isFixed=!0),""!==e.style.transform&&"rotate(0deg)"!==e.style.transform||(e.style.transform="rotate(180deg)")}}},Yt=Dt,Wt=(i("9567"),Object(f["a"])(Yt,$t,Vt,!1,null,"62bb2899",null)),Rt=Wt.exports,Ht={mixins:[c["a"]],components:{EbookReader:o["default"],EbookTitle:d,EbookMenu:kt,EbookBookMark:Rt,EbookHeader:_t,EbookFooter:Et},watch:{offsetY:function(t){!this.menuVisible&&this.bookAvailable&&(t>0?this.move(t):0===t&&this.restore())}},data:function(){return{}},methods:{restore:function(){var t=this;this.move(0),this.$refs.ebook.style.transition="all .2s linear",Object(X["setTimeout"])(function(){t.$refs.ebook.style.transition=""})},move:function(t){this.$refs.ebook.style.top=t+"px"},startLoopReadTime:function(){var t=this,e=Object(g["i"])(this.fileName);e||(e=0),this.task=Object(X["setInterval"])(function(){e++,e%30===0&&Object(g["r"])(t.fileName,e)},1e3)}},mounted:function(){this.startLoopReadTime()},beforeDestroy:function(){this.task&&clearInterval(this.task)}},Xt=Ht,Kt=(i("6658"),Object(f["a"])(Xt,s,n,!1,null,"73515678",null));e["default"]=Kt.exports},"5df3":function(t,e,i){"use strict";var s=i("02f4")(!0);i("01f9")(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,e=this._t,i=this._i;return i>=e.length?{value:void 0,done:!0}:(t=s(e,i),this._i+=t.length,{value:t,done:!1})})},6017:function(t,e,i){(function(t,e){(function(t,i){"use strict";if(!t.setImmediate){var s,n=1,o={},a=!1,r=t.document,c=Object.getPrototypeOf&&Object.getPrototypeOf(t);c=c&&c.setTimeout?c:t,"[object process]"==={}.toString.call(t.process)?d():m()?p():t.MessageChannel?v():r&&"onreadystatechange"in r.createElement("script")?b():k(),c.setImmediate=l,c.clearImmediate=u}function l(t){"function"!==typeof t&&(t=new Function(""+t));for(var e=new Array(arguments.length-1),i=0;i<e.length;i++)e[i]=arguments[i+1];var a={callback:t,args:e};return o[n]=a,s(n),n++}function u(t){delete o[t]}function f(t){var e=t.callback,s=t.args;switch(s.length){case 0:e();break;case 1:e(s[0]);break;case 2:e(s[0],s[1]);break;case 3:e(s[0],s[1],s[2]);break;default:e.apply(i,s);break}}function h(t){if(a)setTimeout(h,0,t);else{var e=o[t];if(e){a=!0;try{f(e)}finally{u(t),a=!1}}}}function d(){s=function(t){e.nextTick(function(){h(t)})}}function m(){if(t.postMessage&&!t.importScripts){var e=!0,i=t.onmessage;return t.onmessage=function(){e=!1},t.postMessage("","*"),t.onmessage=i,e}}function p(){var e="setImmediate$"+Math.random()+"$",i=function(i){i.source===t&&"string"===typeof i.data&&0===i.data.indexOf(e)&&h(+i.data.slice(e.length))};t.addEventListener?t.addEventListener("message",i,!1):t.attachEvent("onmessage",i),s=function(i){t.postMessage(e+i,"*")}}function v(){var t=new MessageChannel;t.port1.onmessage=function(t){var e=t.data;h(e)},s=function(e){t.port2.postMessage(e)}}function b(){var t=r.documentElement;s=function(e){var i=r.createElement("script");i.onreadystatechange=function(){h(e),i.onreadystatechange=null,t.removeChild(i),i=null},t.appendChild(i)}}function k(){s=function(t){setTimeout(h,0,t)}}})("undefined"===typeof self?"undefined"===typeof t?this:t:self)}).call(this,i("c8ba"),i("f28c"))},6658:function(t,e,i){"use strict";var s=i("bdca"),n=i.n(s);n.a},6701:function(t,e,i){"use strict";var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{ref:"scrollWrapper",staticClass:"scroll-wrapper",class:{"no-scroll":t.ifNoScroll},on:{"&scroll":function(e){return t.handleScroll(e)}}},[t._t("default")],2)},n=[],o=(i("c5f6"),i("fa7d")),a={props:{top:{type:Number,default:0},bottom:{type:Number,default:0},ifNoScroll:{type:Boolean,default:!1}},methods:{handleScroll:function(t){var e=t.target.scrollTop||window.pageYOffset||document.body.scrollTop;this.$emit("onScroll",e)},scrollTo:function(t,e){this.$refs.scrollWrapper.scrollTo(t,e)},refresh:function(){this.$refs.scrollWrapper&&(this.$refs.scrollWrapper.style.height=window.innerHeight-Object(o["b"])(this.top)-Object(o["b"])(this.bottom)+"px",this.$refs.scrollWrapper.addEventListener("scroll",this.handleScroll))}},mounted:function(){this.refresh()}},r=a,c=(i("85a8"),i("2877")),l=Object(c["a"])(r,s,n,!1,null,"65b358ea",null);e["a"]=l.exports},"6b54":function(t,e,i){"use strict";i("3846");var s=i("cb7c"),n=i("0bfb"),o=i("9e1e"),a="toString",r=/./[a],c=function(t){i("2aba")(RegExp.prototype,a,t,!0)};i("79e5")(function(){return"/a/b"!=r.call({source:"a",flags:"b"})})?c(function(){var t=s(this);return"/".concat(t.source,"/","flags"in t?t.flags:!o&&t instanceof RegExp?n.call(t):void 0)}):r.name!=a&&c(function(){return r.call(this)})},"6e95":function(t,e,i){"use strict";var s=i("3105"),n=i.n(s);n.a},"7ea5":function(t,e,i){},"7f7f":function(t,e,i){var s=i("86cc").f,n=Function.prototype,o=/^\s*function ([^ (]*)/,a="name";a in n||i("9e1e")&&s(n,a,{configurable:!0,get:function(){try{return(""+this).match(o)[1]}catch(t){return""}}})},"85a8":function(t,e,i){"use strict";var s=i("fe3d"),n=i.n(s);n.a},"873e":function(t,e,i){},"8ec6":function(t,e,i){"use strict";var s=i("873e"),n=i.n(s);n.a},9567:function(t,e,i){"use strict";var s=i("7ea5"),n=i.n(s);n.a},"962e":function(t,e,i){"use strict";var s=i("43f8"),n=i.n(s);n.a},"9c3c":function(t,e,i){},a8d4:function(t,e,i){"use strict";var s=i("e876"),n=i.n(s);n.a},aae3:function(t,e,i){var s=i("d3f4"),n=i("2d95"),o=i("2b4c")("match");t.exports=function(t){var e;return s(t)&&(void 0!==(e=t[o])?!!e:"RegExp"==n(t))}},b42b:function(t,e,i){},ba02:function(t,e,i){},bdca:function(t,e,i){},c956:function(t,e,i){},cc43:function(t,e,i){"use strict";var s=i("ba02"),n=i.n(s);n.a},d50e:function(t,e,i){},e3d7:function(t,e,i){},e876:function(t,e,i){},f00a:function(t,e,i){},f6c3:function(t,e,i){},fe3d:function(t,e,i){}}]);
//# sourceMappingURL=chunk-7d09f826.aded8fb6.js.map